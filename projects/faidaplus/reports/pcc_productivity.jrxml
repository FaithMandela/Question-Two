<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="pcc_productivity" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a85e945a-24c0-4f18-ae71-66e1e2ae9c6c">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="maxDate" class="java.lang.String">
		<defaultValueExpression><![CDATA["2016-01-01"]]></defaultValueExpression>
	</parameter>
	<parameter name="minDate" class="java.lang.String">
		<defaultValueExpression><![CDATA["2016-01-28"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
      to_char(vw_points.period::timestamp with time zone, 'mmyyyy'::text) AS ticket_period,
      vw_points.pcc,
      sum(vw_points.segments) as segments ,
      sum(vw_points.amount) as amount,
      sum(vw_points.points) as points,
      sum(vw_points.bonus) as bonus,
      vw_orgs.org_name
     FROM vw_points
       JOIN vw_orgs ON vw_points.pcc::text = vw_orgs.pcc::text
	WHERE ticket_period >= to_char('$P!{minDate}'::date ,'mmyyyy'::text) AND ticket_period <= to_char('$P!{maxDate}'::date ,'mmyyyy'::text)
	GROUP BY vw_points.period,ticket_period,vw_points.pcc,vw_orgs.org_name
	ORDER BY vw_orgs.org_name ASC;]]>
	</queryString>
	<field name="ticket_period" class="java.lang.String"/>
	<field name="pcc" class="java.lang.String"/>
	<field name="segments" class="java.lang.Float"/>
	<field name="amount" class="java.lang.Float"/>
	<field name="points" class="java.lang.Float"/>
	<field name="bonus" class="java.lang.Float"/>
	<field name="org_name" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="41" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="555" height="29" uuid="83c44773-6d4a-4a69-9877-4b13f8ea04c3"/>
				<textElement textAlignment="Center">
					<font fontName="Times New Roman" size="24"/>
				</textElement>
				<text><![CDATA[AGENCY PRODUCTIVITY]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="16" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="24" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="1" width="64" height="20" uuid="b0244346-f4d0-415d-8baa-23b940186854"/>
				<textElement>
					<font fontName="Times New Roman" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Periods]]></text>
			</staticText>
			<staticText>
				<reportElement x="263" y="1" width="60" height="20" uuid="22a6247e-33ca-4a8c-a431-72b02e633d25"/>
				<textElement>
					<font fontName="Times New Roman" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[PCC]]></text>
			</staticText>
			<staticText>
				<reportElement x="323" y="1" width="68" height="20" uuid="4819e4ab-686d-4ab6-83e3-7d45b7c1d73d"/>
				<textElement>
					<font fontName="Times New Roman" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Segments]]></text>
			</staticText>
			<staticText>
				<reportElement x="391" y="1" width="60" height="20" uuid="b4c7a1ac-403f-4d4e-a960-f236b4db2f72"/>
				<textElement textAlignment="Right">
					<font fontName="Times New Roman" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Points]]></text>
			</staticText>
			<staticText>
				<reportElement x="455" y="0" width="62" height="20" uuid="6d0d03a5-9b8c-4a66-b1b1-99658a5127af"/>
				<textElement textAlignment="Right">
					<font fontName="Times New Roman" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Bonus]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="21" width="555" height="1" uuid="c0210eba-4540-47ff-9bd9-5f4dfeb16874"/>
			</line>
			<staticText>
				<reportElement x="64" y="1" width="199" height="20" uuid="d988541c-cc47-4197-b67b-76ccd7f43536"/>
				<textElement>
					<font fontName="Times New Roman" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Agency Name]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="64" height="20" uuid="e2c63438-ea74-4146-9910-a03191a255ab"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ticket_period}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="263" y="0" width="60" height="20" uuid="c9cb359d-8562-430b-99e1-0e7e3ce3f908"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{pcc}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="455" y="0" width="62" height="20" uuid="2c7659af-96ea-493f-b7d7-c1d55ae3fc2f"/>
				<textElement textAlignment="Center">
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{bonus}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="391" y="0" width="60" height="20" uuid="c3238cc9-5cd5-4029-a460-5722ae056b27"/>
				<textElement textAlignment="Right">
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{points}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0" isBlankWhenNull="true">
				<reportElement x="323" y="0" width="68" height="20" uuid="0e9e650a-dcd4-4d3c-97a5-7084b43dc463"/>
				<textElement textAlignment="Center">
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{segments}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="64" y="0" width="199" height="20" uuid="862c74fa-da46-4d04-b22e-81d203b810a6"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{org_name}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
