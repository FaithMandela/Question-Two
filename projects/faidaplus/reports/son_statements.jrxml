<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="son_statements" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="b4590c5f-f591-4895-b50d-1fdaec5d54a1">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<queryString>
		<![CDATA[SELECT a.dr,
    a.cr,
    a.order_date,
    a.son,
    a.pcc,
    a.org_name,
    a.entity_id,
    a.dr - a.cr AS balance,
    a.details
   FROM ( SELECT COALESCE(vw_son_points.points, 0::real) + COALESCE(vw_son_points.bonus, 0::real) AS dr,
            0::real AS cr,
            vw_son_points.period AS order_date,
            vw_son_points.son,
            vw_son_points.pcc,
            vw_son_points.org_name,
            vw_son_points.entity_id,
            '#Segments'::text AS details
           FROM vw_son_points
        UNION
         SELECT 0::real AS float4,
            vw_orders.ordertotalamount::real AS ordertotalamount,
            vw_orders.order_date,
            vw_orders.son,
            vw_orders.pcc,
            vw_orders.org_name,
            vw_orders.entity_id,
            vw_orders.details
           FROM vw_orders) a
  ORDER BY a.pcc, a.son, a.order_date;]]>
	</queryString>
	<field name="dr" class="java.lang.Float"/>
	<field name="cr" class="java.lang.Float"/>
	<field name="order_date" class="java.sql.Date"/>
	<field name="son" class="java.lang.String"/>
	<field name="pcc" class="java.lang.String"/>
	<field name="org_name" class="java.lang.String"/>
	<field name="entity_id" class="java.lang.Integer"/>
	<field name="balance" class="java.lang.Float"/>
	<field name="details" class="java.lang.String"/>
	<variable name="v_balance" class="java.lang.Float" calculation="Sum">
		<variableExpression><![CDATA[$F{balance}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="39" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="555" height="33" uuid="5fbb2ce3-b9ea-4cba-9c3d-7526dfdea926"/>
				<textElement textAlignment="Center">
					<font fontName="Times New Roman" size="24" isBold="true"/>
				</textElement>
				<text><![CDATA[Statement]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="13" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="28" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="100" height="20" uuid="14721a4e-0063-4767-b809-71f5bbe3f337"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<text><![CDATA[Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="100" y="0" width="100" height="20" uuid="b7a03a29-7d61-4b95-973c-b7c02fcf42ff"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<text><![CDATA[Details]]></text>
			</staticText>
			<staticText>
				<reportElement x="200" y="0" width="100" height="20" uuid="23f3c26e-dd00-488e-8635-615673b21cbc"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<text><![CDATA[Dr]]></text>
			</staticText>
			<staticText>
				<reportElement x="400" y="0" width="100" height="20" uuid="d2a4bb67-32c1-453b-a023-3e1823f7d6b0"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<text><![CDATA[Balance]]></text>
			</staticText>
			<staticText>
				<reportElement x="300" y="0" width="100" height="20" uuid="c99f9f2f-f47c-43aa-a079-ee1485266734"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<text><![CDATA[Cr]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="25" width="555" height="1" uuid="2d7b638c-e4fb-48f2-8bde-509d6408a4f8"/>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="22" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="0" y="0" width="100" height="20" uuid="c5cf82b7-340e-4e77-a08f-f2b968e0d0af"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{order_date}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="100" y="0" width="100" height="20" uuid="ed3702c7-d8b6-4c1d-8be8-dd58807632c0"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{details}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="200" y="0" width="100" height="20" uuid="61ba9165-9450-44c4-8f9c-978cef6b53d0"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dr}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="300" y="0" width="100" height="20" uuid="c691b140-9a33-46c1-bdcf-fc648d831a6f"/>
				<textElement>
					<font fontName="Times New Roman" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cr}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="400" y="0" width="100" height="20" uuid="41453f50-e283-48bd-b25b-d4c4d8dfcac9"/>
				<textElement>
					<font fontName="Times New Roman" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{v_balance}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
